# Tree 树形控件

具备展示多层级数据结构特征的组件

## 何时使用

多层级数据结构

需要明确的展示层级结构

对多层级结构节点进行操作

## 使用示例

<!-- Inject Stories -->

## Props

<!-- Inject Props -->

## Events

| 名称           | 说明                                                        | 类型                                                                                | 参数                                                                                                                                         | 返回值                                                    |
| -------------- | ----------------------------------------------------------- | ----------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------- |
| onExpand       | 节点被点击(展开/收起)时触发                                 | (expandedNode: TreeNode, expanded: boolean, expandIds: string[] ) => void           | expandedNode: 点击的树节点 <br/>expanded: 点击的节点展开状态<br/> expandIds: 当前展开的树节点 ID 集合                                        | -                                                         |
| onCheck        | 点击节点多选框触发                                          | (checked: boolean, checkedIds: string[], checkedNode: TreeNode) => void             | checked: 点击节点是否被勾选<br/>checkedIds: 选中/半选节点数据；`{checkedIds: array, semiCheckedIds: array}` <br/>checkedNode: 操作的节点对象 | -                                                         |
| onSelect       | 点击节点时触发                                              | (selectedNode: TreeNode) => void                                                    | selectedNode: 选中的树节点                                                                                                                   | -                                                         |
| onDragStart    | 节点开始拖拽时触发                                          | (dragNode: TreeNode) => void                                                        | dragNode: 拖拽的节点对象                                                                                                                     | -                                                         |
| onDrop         | 节点放开时触发                                              | (dragNode: TreeNode, dropNode: TreeNode, data: DataStatus, level: Level) => boolean | dragNode: 拖拽的节点对象 <br/>dropNode: 目标节点对象<br/>data:当前结构数据 `DataStatus` <br/>level:当前级别数据                              | -                                                         |
| onDropEnd      | 节点拖拽成功时触发                                          | (dragNode: TreeNode, dropNode: TreeNode) => void                                    | dragNode: 拖拽的节点对象 <br/>dropNode: 目标节点对象                                                                                         | -                                                         |
| onBeforeDelete | 节点删除前触发,返回 false 则节点删除失败，不会触发 onDelete | (deletedNode: TreeNode, data: DataStatus, level: number) => boolean                 | deletedNode: 要删除的节点对象 <br/> data:当前结构数据 `DataStatus` <br/>level:当前级别数据                                                   | boolean: 返回 false 将阻止删除                            |
| onDelete       | 节点删除后触发                                              | (deletedNode: TreeNode, data: TreeNode[]) => void                                   | deletedNode: 删除的节点对象 <br/> data: 删除后的节点数据集合                                                                                 | -                                                         |
| onBeforeSave   | 节点保存新增、编辑状态时触发                                | (savedNode: TreeNode, data: DataStatus, level: number) => boolean                   | savedNode: 要保存的数据对象 <br/> data:当前结构数据 `DataStatus` <br/>level:当前级别数据                                                     | boolean: 返回 false 则保存新增、编辑失败，不会触发 onSave |
| onSave         | 节点保存新增、编辑状态后触发                                | (savedNode: TreeNode, data: TreeNode[]) => void                                     | savedNode: 保存的数据对象 <br/> data: 保存后的节点数据集合                                                                                   | -                                                         |

## Type

### LoadChildren

| 参数              | 说明                                                       | 类型                             | 可选值          | 默认值 |
| ----------------- | ---------------------------------------------------------- | -------------------------------- | --------------- | ------ |
| method            | 异步请求的方法                                             | string                           | 'get' \| 'post' | 'get'  |
| url               | 异步请求的 url                                             | string                           | -               | -      |
| headers           | 异步请求的请求头                                           | TreeNode                         | -               | -      |
| data              | post 请求时的请求体                                        | object                           | -               | -      |
| params            | 异步请求时的 url 参数                                      | object                           | -               | -      |
| transformResponse | 对异步请求结果进行加工处理的函数，返回结果用于生成子节点项 | (response: object) => TreeNode[] | -               | -      |

### TreeNode

| 参数     | 说明           | 类型                | 可选值        | 默认值 |
| -------- | -------------- | ------------------- | ------------- | ------ |
| id       | 树节点唯一 id  | string              | -             | -      |
| title    | 树节点标题     | string \| ReactNode | -             | -      |
| disabled | 是否禁用节点   | boolean             | true \| false | false  |
| children | 该节点的子节点 | TreeNode[]          | -             | -      |
| isLeaf   | 是否为叶子节点 | boolean             | true \| false | -      |
| selectable | 节点是否可选中 | boolean           | true \| false | true   |

### Level

| 参数   | 说明               | 类型   | 可选值 | 默认值 |
| ------ | ------------------ | ------ | ------ | ------ |
| before | 拖拽前在树中的层级 | number | -      | -      |
| after  | 拖拽后在树中的层级 | number | -      | -      |

### DataStatus

| 参数   | 说明                   | 类型       | 可选值 | 默认值 |
| ------ | ---------------------- | ---------- | ------ | ------ |
| before | 更新前整个树的数据结构 | []TreeNode | -      | -      |
| after  | 更新后整个树的数据结构 | []TreeNode | -      | -      |

### ContextMenuOption

| 参数    | 说明               | 类型                                      | 可选值                                                                                                                  | 默认值 |
| ------- | ------------------ | ----------------------------------------- | ----------------------------------------------------------------------------------------------------------------------- | ------ |
| type    | 菜单执行的功能     | string                                    | editNode: 编辑当前节点 <br/> addChildNode: 添加子节点 <br/> addSiblingNode: 添加同级节点 <br/> deleteNode: 删除当前节点 | -      |
| title   | 菜单标题           | string \| ReactNode                       | -                                                                                                                       | -      |
| onClick | 点击菜单项时的回调 | ( item: DataItem, node: TreeNode) => void | -                                                                                                                       | -      |

> **自定义右键菜单使用说明**
>
> contextMenu 参数：
>
> - type: editNode / addChildNode / addSiblingNode / deleteNode
> - title: 自定义 Title / 行为默认 Title
> - onClick: (item: 当前节点数据, node: 当前节点) => {
>
>   _如需调用组件提供的 新增同级节点 / 新增子节点 / 编辑当前节点/ 删除当前节点_
>
>   _需调用 node.addSiblingNode/ addChildNode/ editNode / deleteNode_
>
>   }
